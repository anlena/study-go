<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <!-- 进度条 -->
    <div id="test" style="width:1px;height:17px;background:#0f0;">0%</div>
    <!-- 正方形 -->
    <div class="angle-div" style="width:100px;height:100px;background:blue;"></div>
    <button id="run">走</button>
</body>
<script>
    window.requestAnimationFrame = window.requestAnimationFrame || window.webkitCancelAnimationFrame;

    var start = null;
    var ele = document.getElementById("test");
    var progress = 0;

    function step(timestemp){
        progress += 1;
        ele.style.width = progress + "%";
        ele.innerHTML = progress + "%";
        if(progress < 100){
            requestAnimationFrame(step);
        }
    }

    requestAnimationFrame(step);
    document.getElementById("run").addEventListener("click",function(){
        ele.style.width = "1px";
        progress = 0;
        requestAnimationFrame(step);
    })
</script>
<script>
    let timer = null;
    let Deg = 0;
    let distance = 360;
    var _requestAnimationFrame_ = window.requestAnimationFrame || window.webkitRequestAnimationFrame;
    let angleDiv = document.querySelector(".angle-div");
    cancelAnimationFrame(timer);
    let fn = () => {
        if(Deg < distance){
            Deg++;
        }else{
            Deg = 0;
        };
        angleDiv.style.transform = `rotateZ(${Deg}deg) translateZ(0)`;
        angleDiv.style.WebkitTransform = `rotateZ(${Deg}deg) translateZ(0)`;
        timer = _requestAnimationFrame_(fn);
    }

    timer = _requestAnimationFrame_(fn);
</script>
</html>